!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).mexp=t()}}((function(){return function t(e,n,a){function o(h,p){if(!n[h]){if(!e[h]){var s="function"==typeof require&&require;if(!p&&s)return s(h,!0);if(u)return u(h,!0);var i=new Error("Cannot find module '"+h+"'");throw i.code="MODULE_NOT_FOUND",i}var r=n[h]={exports:{}};e[h][0].call(r.exports,(function(t){return o(e[h][1][t]||t)}),r,r.exports,t,e,n,a)}return n[h].exports}for(var u="function"==typeof require&&require,h=0;h<a.length;h++)o(a[h]);return o}({1:[function(t,e,n){var a=t("./postfix_evaluator.js");a.prototype.formulaEval=function(){"use strict";for(var t,e,n,a=[],o=this.value,u=0;u<o.length;u++)1===o[u].type||3===o[u].type?a.push({value:3===o[u].type?o[u].show:o[u].value,type:1}):13===o[u].type?a.push({value:o[u].show,type:1}):0===o[u].type?a[a.length-1]={value:o[u].show+("-"!=o[u].show?"(":"")+a[a.length-1].value+("-"!=o[u].show?")":""),type:0}:7===o[u].type?a[a.length-1]={value:(1!=a[a.length-1].type?"(":"")+a[a.length-1].value+(1!=a[a.length-1].type?")":"")+o[u].show,type:7}:10===o[u].type?(t=a.pop(),e=a.pop(),"P"===o[u].show||"C"===o[u].show?a.push({value:"<sup>"+e.value+"</sup>"+o[u].show+"<sub>"+t.value+"</sub>",type:10}):a.push({value:(1!=e.type?"(":"")+e.value+(1!=e.type?")":"")+"<sup>"+t.value+"</sup>",type:1})):2===o[u].type||9===o[u].type?(t=a.pop(),e=a.pop(),a.push({value:(1!=e.type?"(":"")+e.value+(1!=e.type?")":"")+o[u].show+(1!=t.type?"(":"")+t.value+(1!=t.type?")":""),type:o[u].type})):12===o[u].type&&(t=a.pop(),e=a.pop(),n=a.pop(),a.push({value:o[u].show+"("+n.value+","+e.value+","+t.value+")",type:12}));return a[0].value},e.exports=a},{"./postfix_evaluator.js":5}],2:[function(t,e,n){function a(t,e){for(var n=0;n<t.length;n++)t[n]+=e;return t}function o(t,e,n,a){for(var o=0;o<a;o++)if(t[n+o]!==e[o])return!1;return!0}var u=t("./math_function.js"),h=["sin","cos","tan","pi","(",")","P","C","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],p=["sin","cos","tan","&pi;","(",")","P","C","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],s=[u.math.sin,u.math.cos,u.math.tan,"PI","(",")",u.math.P,u.math.C,u.math.asin,u.math.acos,u.math.atan,"7","8","9",Math.floor,u.math.cosh,u.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",u.math.div,u.math.fact,u.math.tanh,u.math.atanh,u.math.mod,"1","2","3",u.math.mul,u.math.sinh,u.math.asinh,"E",u.math.log,"0",".",u.math.add,u.math.sub,",",u.math.sigma,"n",u.math.Pi,Math.pow],i={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0},r=[0,0,0,3,4,5,10,10,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],l={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0},f={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},v={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},c={},y={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},g={1:!0},m=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];u.addToken=function(t){for(var e=0;e<t.length;e++){var n=t[e].token.length,a=-1;if(n<m.length)for(var o=0;o<m[n].length;o++)if(t[e].token===m[n][o]){a=h.indexOf(m[n][o]);break}-1===a?(h.push(t[e].token),r.push(t[e].type),m.length<=t[e].token.length&&(m[t[e].token.length]=[]),m[t[e].token.length].push(t[e].token),s.push(t[e].value),p.push(t[e].show)):(h[a]=t[e].token,r[a]=t[e].type,s[a]=t[e].value,p[a]=t[e].show)}},u.lex=function(t,e){"use strict";var n,d,w,x,M={value:u.math.changeSign,type:0,pre:21,show:"-"},E={value:")",show:")",type:5,pre:0},P={value:"(",type:4,pre:0,show:"("},b=[P],D=[],k=t,j=l,C=0,I=c,q="";void 0!==e&&u.addToken(e);var N={};for(d=0;d<k.length;d++)if(" "!==k[d]){for(n="",w=k.length-d>m.length-2?m.length-1:k.length-d;w>0;w--)if(void 0!==m[w])for(x=0;x<m[w].length;x++)o(k,m[w][x],d,w)&&(n=m[w][x],x=m[w].length,w=0);if(d+=n.length-1,""===n)throw new u.Exception("Can't understand after "+k.slice(d));var O,S=h.indexOf(n),_=n,R=r[S],T=s[S],F=i[R],U=p[S],L=b[b.length-1];for(O=D.length;O--&&0===D[O];)if(-1!==[0,2,3,4,5,9,11,12,13].indexOf(R)){if(!0!==j[R])throw new u.Exception(n+" is not allowed after "+q);b.push(E),j=f,I=y,a(D,-1).pop()}if(!0!==j[R])throw new u.Exception(n+" is not allowed after "+q);if(!0===I[R]&&(R=2,T=u.math.mul,U="&times;",F=3,d-=n.length),N={value:T,type:R,pre:F,show:U},0===R)j=l,I=c,a(D,2).push(2),b.push(N),b.push(P);else if(1===R)1===L.type?(L.value+=T,a(D,1)):b.push(N),j=f,I=v;else if(2===R)j=l,I=c,a(D,2),b.push(N);else if(3===R)b.push(N),j=f,I=y;else if(4===R)a(D,1),C++,j=l,I=c,b.push(N);else if(5===R){if(!C)throw new u.Exception("Closing parenthesis are more than opening one, wait What!!!");C--,j=f,I=y,b.push(N)}else if(6===R){if(L.hasDec)throw new u.Exception("Two decimals are not allowed in one number");1!==L.type&&(L={value:0,type:1,pre:0},b.push(L),a(D,-1)),j=g,a(D,1),I=c,L.value+=T,L.hasDec=!0}else 7===R&&(j=f,I=y,a(D,1),b.push(N));8===R?(j=l,I=c,a(D,4).push(4),b.push(N),b.push(P)):9===R?(9===L.type?L.value===u.math.add?(L.value=T,L.show=U,a(D,1)):L.value===u.math.sub&&"-"===U&&(L.value=u.math.add,L.show="+",a(D,1)):5!==L.type&&7!==L.type&&1!==L.type&&3!==L.type&&13!==L.type?"-"===_&&(j=l,I=c,a(D,2).push(2),b.push(M),b.push(P)):(b.push(N),a(D,2)),j=l,I=c):10===R?(j=l,I=c,a(D,2),b.push(N)):11===R?(j=l,I=c,b.push(N)):12===R?(j=l,I=c,a(D,6).push(6),b.push(N),b.push(P)):13===R&&(j=f,I=y,b.push(N)),a(D,-1),q=n}for(O=D.length;O--&&0===D[O];)b.push(E),a(D,-1).pop();if(!0!==j[5])throw new u.Exception("complete the expression");for(;C--;)b.push(E);return b.push(E),new u(b)},e.exports=u},{"./math_function.js":3}],3:[function(t,e,n){var a=function(t){this.value=t};a.math={isDegree:!0,acos:function(t){return a.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,e){return t+e},asin:function(t){return a.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return a.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,e){var n=1,o=t-e,u=e;u<o&&(u=o,o=e);for(var h=u+1;h<=t;h++)n*=h;return n/a.math.fact(o)},changeSign:function(t){return-t},cos:function(t){return a.math.isDegree&&(t=a.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,e){return t/e},fact:function(t){if(t%1!=0)return"NaN";for(var e=1,n=2;n<=t;n++)e*=n;return e},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,e){return t%e},mul:function(t,e){return t*e},P:function(t,e){for(var n=1,a=Math.floor(t)-Math.floor(e)+1;a<=Math.floor(t);a++)n*=a;return n},Pi:function(t,e,n){for(var a=1,o=t;o<=e;o++)a*=Number(n.postfixEval({n:o}));return a},pow10x:function(t){for(var e=1;t--;)e*=10;return e},sigma:function(t,e,n){for(var a=0,o=t;o<=e;o++)a+=Number(n.postfixEval({n:o}));return a},sin:function(t){return a.math.isDegree&&(t=a.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,e){return t-e},tan:function(t){return a.math.isDegree&&(t=a.math.toRadian(t)),Math.tan(t)},tanh:function(t){return a.sinha(t)/a.cosha(t)},toRadian:function(t){return t*Math.PI/180}},a.Exception=function(t){this.message=t},e.exports=a},{}],4:[function(t,e,n){var a=t("./lexer.js");a.prototype.toPostfix=function(){"use strict";for(var t,e,n,o,u,h=[],p=[{value:"(",type:4,pre:0}],s=this.value,i=1;i<s.length;i++)if(1===s[i].type||3===s[i].type||13===s[i].type)1===s[i].type&&(s[i].value=Number(s[i].value)),h.push(s[i]);else if(4===s[i].type)p.push(s[i]);else if(5===s[i].type)for(;4!==(e=p.pop()).type;)h.push(e);else if(11===s[i].type){for(;4!==(e=p.pop()).type;)h.push(e);p.push(e)}else{o=(t=s[i]).pre,n=(u=p[p.length-1]).pre;var r="Math.pow"==u.value&&"Math.pow"==t.value;if(o>n)p.push(t);else{for(;n>=o&&!r||r&&o<n;)e=p.pop(),u=p[p.length-1],h.push(e),n=u.pre,r="Math.pow"==t.value&&"Math.pow"==u.value;p.push(t)}}return new a(h)},e.exports=a},{"./lexer.js":2}],5:[function(t,e,n){var a=t("./postfix.js");a.prototype.postfixEval=function(t){"use strict";(t=t||{}).PI=Math.PI,t.E=Math.E;for(var e,n,o,u=[],h=this.value,p=void 0!==t.n,s=0;s<h.length;s++)1===h[s].type?u.push({value:h[s].value,type:1}):3===h[s].type?u.push({value:t[h[s].value],type:1}):0===h[s].type||7===h[s].type?void 0===u[u.length-1].type?u[u.length-1].value.push(h[s]):u[u.length-1].value=h[s].value(u[u.length-1].value):8===h[s].type?(e=u.pop(),n=u.pop(),u.push({type:1,value:h[s].value(n.value,e.value)})):10===h[s].type?(e=u.pop(),void 0===(n=u.pop()).type?(n.value=n.concat(e),n.value.push(h[s]),u.push(n)):void 0===e.type?(e.unshift(n),e.push(h[s]),u.push(e)):u.push({type:1,value:h[s].value(n.value,e.value)})):2===h[s].type||9===h[s].type?(e=u.pop(),void 0===(n=u.pop()).type?(console.log(n),(n=n.concat(e)).push(h[s]),u.push(n)):void 0===e.type?(e.unshift(n),e.push(h[s]),u.push(e)):u.push({type:1,value:h[s].value(n.value,e.value)})):12===h[s].type?(void 0!==(e=u.pop()).type&&(e=[e]),n=u.pop(),o=u.pop(),u.push({type:1,value:h[s].value(o.value,n.value,new a(e))})):13===h[s].type&&(p?u.push({value:t[h[s].value],type:3}):u.push([h[s]]));if(u.length>1)throw new a.exception("Uncaught Syntax error");return u[0].value>1e15?"Infinity":parseFloat(u[0].value.toFixed(15))},a.eval=function(t,e,n){return void 0===e?this.lex(t).toPostfix().postfixEval():void 0===n?void 0!==e.length?this.lex(t,e).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(e):this.lex(t,e).toPostfix().postfixEval(n)},e.exports=a},{"./postfix.js":4}]},{},[1])(1)}));
